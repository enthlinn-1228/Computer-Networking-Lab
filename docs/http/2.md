# URL 和资源
URL 提供了一种统一命名资源的方式。
```
方案://服务器位置/路径
```
![](imgs/h2-1.png)

URL 可以通过 HTTP 以外的协议来访问资源。例如个人的电子邮件几遍：
```
mailto:411020382@qq.com
```
或者其他协议，比如 FTP：
```
ftp://ftp.test.com/test.xls
```
或者从流视频服务器上下载电影：
```
rtsp://www.test.com:554/video
```

## URL 的语法
大多数的 URL 语法都建立在这个由 9 个部分组成的通用格式上：
```
<scheme>://<user>:<password>@<host>:<port>/<path>;<params>?<query>#<frag>
```
几乎没有哪个 URL 包含了所有这些组件。URL 最重要的是方案(scheme)、主机(host)、路径(path)。

![](imgs/h2-2.png)

#### 方案——使用什么协议
方案实际上是规定如何访问指定资源的主要标识符，它会告诉负责解析 URL 的应用程序应该使用什么协议。

#### 主机与端口
主机组件标识了因特网上能够访问资源的宿主机器。端口组件标识了服务器正在监听的网络端口。

#### 用户名和密码
有些服务器要求输入用户名和密码才能访问：
```
ftp://test:my_password@ftp.prep.mit.edu/pub/gnu
```
以上例子用户名为 `test`，密码为 `my_password`。

#### 路径
路径组件说明了资源位于服务器的什么地方。
```
http://test.com/test.html
```
以上 URL 的路径为 `test.html`。

#### 参数
参数组件向应用程序提供了它们所需的输入参数，以便正确地和服务器交互。
```
http://test.com/test.html?key=value&key2=value2
```
在这例子中，有两个查询参数，中间用 `&` 隔开。其中一个参数名称为 `key`，值为 `value`。

#### 片段
有些资源类型还可以做进一步的划分，例如 HTML。URL 使用片段组件来表示一个资源内部的片段。片段挂在 URL 的右手边，前端有一个字符 `#`。
```
https://github.com/woai3c/Front-end-basic-knowledge/blob/master/HTML.md#viewport
``` 
在以上 URL 中，`#` 后面的 `viewport` 就是一个片段。浏览器从服务器获得整个资源后，会根据片段来显示你感兴趣的那部分资源。

## URL 快捷方式
#### 相对 URL
URL 有两种：绝对的和相对的。

绝对 URL 拥有访问资源的完整信息。相对 URL 是不完整的，要想从相对 URL 中获取访问资源的完整信息，就必须相对于另一个。
```
http://test.com/index.html
```
假如在这个文档中有一个包含了 URL `./test2.html` 的超链接，点击它跳转页面的时候当前 URL 会转换为 `http://test.com/test2.html`。

相对 URL 是基于基础 URL 进行解释的。在上面的例子中，基础 URL 为 `http://test.com/index.html`。

#### 自动扩展 URL
有些浏览器在用户输入 URL 的时候会尝试自动扩展 URL。自动扩展有两种方式：
1. 主机名扩展，只要有些小提示，浏览器就可以将你输入的主机名扩展为完整的主机名。例如输入 `yahoo`，浏览器会自动扩展为 `www.yahoo.com`。
2. 历史扩展，浏览器会将以前访问过的 URL 存储起来，当你输入 URL 的时候，浏览器就可以将你的输入和历史记录中的 URL 的前缀进行匹配，并提供一些完整的选项供你选择。

## 各种令人头疼的字符
#### 编码机制
为了避开安全字符集表示法带来的限制，人们设计了一种编码机制，用来在 URL 中表示不安全的字符。这种机制通过一种转义表示法来表示不安全的字符。
这种转义表示法包含一个百分号（%），后面跟着两个表示字符 ASCII 码的十六进制数。

![](imgs/h2-3.png)

#### 字符限制
在 URL 中，有几个字符被保留起来，有着特殊的含义。有些字符不在定义的 ASCII 可打印字符集中。还有些字符会与某些因特网网关和协议产生混淆，因此不建议使用。

![](imgs/h2-4.png)